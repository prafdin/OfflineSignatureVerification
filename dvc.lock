schema: '2.0'
stages:
  prepare:
    cmd: python src/prepare.py data/CEDAR data/prepared/dataset.pkl
    deps:
    - path: data/CEDAR/
      hash: md5
      md5: 64943e6c8ef4ae9a2be354bb49d56102.dir
      size: 252256693
      nfiles: 2640
    - path: src/prepare.py
      hash: md5
      md5: d04cbb752e4357d46c4bb26677bc9a05
      size: 2609
    params:
      params.yaml:
        prepare.fixed_size: 300,400
        prepare.mode: thinned
    outs:
    - path: data/prepared/dataset.pkl
      hash: md5
      md5: 5418b32c9a49ad3e58f50697e21d1b49
      size: 158461522
  featurize:
    cmd: python src/featurize.py data/prepared/dataset.pkl data/features/dataset.pkl
    deps:
    - path: data/prepared/dataset.pkl
      hash: md5
      md5: 5418b32c9a49ad3e58f50697e21d1b49
      size: 158461522
    - path: src/featurize.py
      hash: md5
      md5: 56357000298062183ffbe794f389c289
      size: 2258
    params:
      params.yaml:
        featurization.method: polinom_coefficients_hist
        featurization.patterns_hist:
          w_size: 6
        featurization.polinom_coefficients_hist:
          w_size: 6
    outs:
    - path: data/features/dataset.pkl
      hash: md5
      md5: 7ca43a45a84548a46c8dc9be69856809
      size: 1100508
  split:
    cmd: python src/split.py data/features/dataset.pkl data/splitted/train.pt data/splitted/test.pt
    deps:
    - path: data/features/dataset.pkl
      hash: md5
      md5: 7ca43a45a84548a46c8dc9be69856809
      size: 1100508
    - path: src/split.py
      hash: md5
      md5: 31d9ac88352258ad88a28e6590562489
      size: 1697
    params:
      params.yaml:
        split.salt: 44
    outs:
    - path: data/splitted/test.pt
      hash: md5
      md5: b20f7867873092a738c79e649723856a
      size: 1349332
    - path: data/splitted/train.pt
      hash: md5
      md5: 31db843c6965deeace9eb5ffec033a30
      size: 1351192
  eval:
    cmd: python src/eval.py data/splitted/train.pt data/splitted/test.pt
    deps:
    - path: data/splitted/test.pt
      hash: md5
      md5: b20f7867873092a738c79e649723856a
      size: 1349332
    - path: data/splitted/train.pt
      hash: md5
      md5: 31db843c6965deeace9eb5ffec033a30
      size: 1351192
    - path: src/eval.py
      hash: md5
      md5: 5e1bf4725b730b2d38aee8294c6e4033
      size: 2795
    params:
      params.yaml:
        eval.knn:
          k: 6
          metric: BHATTACHARYYA
        eval.use_cls: knn
    outs:
    - path: eval
      hash: md5
      md5: c20790ce68c1ad7f06834c6e220be15d.dir
      size: 79
      nfiles: 2
